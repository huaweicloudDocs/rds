# 将数据库实例恢复到指定时间点<a name="zh-cn_topic_0044589638"></a>

## 操作场景<a name="section3037032812838"></a>

华为云关系型数据库服务支持使用已有的自动备份，恢复实例数据到指定时间点。

账户余额大于等于0元，才可恢复到新实例。

## 背景<a name="section1355214235810"></a>

开启操作保护的用户，在进行敏感操作时，通过进行二次认证再次确认您的身份，进一步提高帐号安全性，有效保护您安全使用云产品。关于如何开启操作保护，具体请参考《统一身份认证服务用户指南》的内容。

## 操作步骤<a name="section26193354164653"></a>

1.  [登录云数据库](https://support.huaweicloud.com/qs-rds/rds_login.html)。
2.  在“实例管理“页面，选择指定的实例，单击实例名称。
3.  在左侧导航栏中选择“备份恢复“页签，单击“恢复到指定时间点“。
4.  选择需要恢复的时间区间，选择或输入该恢复时间区间内的一个恢复时间点，选择恢复方式，若选择恢复到当前实例，且您已开启操作保护，在“恢复到指定时间点“弹框，单击“去验证“，跳转至验证页面，单击“免费获取验证码“，正确输入验证码并单击“认证“，验证页面自动关闭。单击“确定”。
    -   恢复到新实例

        跳转到“恢复到新实例”的服务选型页面：

        -   数据库引擎和数据库版本，与原实例相同，数据库端口为默认值5432，以上参数皆不可修改。
        -   存储空间大小默认和原实例相同，且必须大于或等于原实例存储空间大小，数据库密码需重新设置。
        -   其他参数默认，用户可设置，请参见[购买实例](https://support.huaweicloud.com/qs-rds/zh-cn_topic_0046585384.md)。
        -           -   
    -   恢复到当前实例

        >![](public_sys-resources/icon-notice.gif) **注意：**   
        >恢复到当前实例会导致实例数据被覆盖，且恢复过程中实例将不可用。  

    -   恢复到已有实例

        >![](public_sys-resources/icon-notice.gif) **注意：**   
        >-   恢复到已有实例会导致实例数据被覆盖，且恢复过程中实例将不可用。  
        >-   请确保目标实例的存储空间大于或等于当前实例，否则会导致任务下发失败。  

        选择目标实例，单击“确定“。

        **图 1**  恢复PostgreSQL实例到指定时间点<a name="f90e0681580e444b1a57666fd8f3cc61d"></a>  
        ![](figures/恢复PostgreSQL实例到指定时间点.png "恢复PostgreSQL实例到指定时间点")


5.  查看恢复结果。

    -   恢复到新实例

        为用户重新创建一个和该备份数据相同的实例。可看到实例由“创建中“变为“正常“，说明恢复成功。

        恢复成功的新实例是一个独立的实例，与原有实例没有关联。如需使用只读实例，请重新在该实例上进行创建。

    -   恢复到当前实例

        在“实例管理”页面，可查看该实例下所有实例状态为“恢复中”，恢复完成后，实例状态由“恢复中”变为“正常”。

        用户可在界面上看到一个新的可恢复时间区间，且该时间区间与原时间区间有一段时间差（即恢复占用的时间）。

    -   恢复到已有实例

        在“实例管理”页面，可查看该实例下所有实例状态为“恢复中”，恢复完成后，实例状态由“恢复中”变为“正常”。


    创建或恢复完成后，系统会自动执行一次全量备份。


