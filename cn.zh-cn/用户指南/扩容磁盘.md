# 扩容磁盘<a name="TOPIC_0142028175"></a>

## 操作场景<a name="section3404387132643"></a>

随着业务数据的增加，原来申请的数据库磁盘容量可能会不够用，尤其当实例显示“磁盘空间满”状态，且数据库不可进行写入操作。这时，您需要为华为云关系型数据库实例进行扩容。

-   数据库磁盘空间不足的原因和解决方案，请参见[数据超过了RDS实例的最大存储容量怎么办](https://support.huaweicloud.com/rds_faq/rds_faq_0046.html)。

华为云关系型数据库服务只支持扩容磁盘存储空间大小，不支持变更存储类型。磁盘扩容期间，服务不中断。

>![](public_sys-resources/icon-note.gif) **说明：**   
>-   华为云关系型数据库实例支持无限次扩容。  
>-   如果是主备实例，针对主实例扩容时，会同时对其备实例进行扩容。  
>-   扩容过程中，该实例不可重启和删除。  
>-   磁盘容量变更只允许扩容，不能缩容。  
>-   选择磁盘加密的实例，新扩容的磁盘空间依然会使用原加密密钥进行加密。  
>-   账户余额大于等于0元，才可进行扩容。  

## 主实例扩容<a name="section3535102285710"></a>

1.  登录管理控制台。
2.  单击管理控制台左上角的![](figures/region.png)，选择区域和项目。

    您可选择自己的专属计算集群（Dedicated Computing Cluster，简称DCC）。

3.  选择“数据库  \>  关系型数据库“，进入关系型数据库信息页面。
4.  在“实例管理”页面，选择相应的实例，单击“扩容“，进入“服务选型”页面。您也可以通过单击目标实例名称，进入“基本信息”页面，单击“扩容”，进入“服务选型”页面。
5.  在“服务选型“页面的“磁盘扩容“页签，选择“扩容到”的空间大小，单击“立即申请”。

    用户每次扩容最小容量为10GB，实例所选容量大小必须为10的整数倍，最大磁盘容量跟数据库引擎有关：

    -   对于MySQL/PostgreSQL引擎，最大磁盘容量为6400GB。
    -   对于SQL Server引擎，最大磁盘容量为4000GB。因为window磁盘格式的大小限制，部分SQL Server实例的磁盘容量上限仍为2000GB，具体以页面显示为准。

    当实例处于“磁盘空间满”状态时，需扩容至磁盘空间使用率小于75%才可使实例处于可用状态，即数据库恢复正常的写入操作。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >1.  具有公测权限的用户才可使用超高性能型实例规格，您可联系华为云客服人员申请。  
    >2.  目前仅MySQL、PostgreSQL引擎支持超高性能型实例规格。  
    >3.  超高性能型实例规格的扩容限制如下：  
    >    -   对于8U64GB规格的实例，用户每次扩容最小容量为800GB，实例所选容量大小必须为10的整数倍，最大磁盘容量为1600GB。  
    >    -   对于16U128GB规格的实例，用户每次扩容最小容量为800GB，实例所选容量大小必须为10的整数倍，最大磁盘容量为3200GB。  
    >    -   对于32U256GB规格的实例，用户每次扩容最小容量为1600GB，实例所选容量大小必须为10的整数倍，最大磁盘容量为6400GB。  
    >    -   对于48U384GB规格的实例，用户每次扩容最小容量为1600GB，实例所选容量大小必须为10的整数倍，最大磁盘容量为9600GB。  
    >    -   对于60U512GB规格的实例，用户每次扩容最小容量为2000GB，实例所选容量大小必须为10的整数倍，最大磁盘容量为11200GB。  

6.  确认订单。
    -   如果需要重新选择，单击“上一步“，回到上个页面，修改新增大小。
    -   如果确认无误，按需实例单击“提交“，包周期实例单击“去支付“，提交扩容。

7.  查看扩容结果。

    在实例管理页面，可看到实例状态为“扩容中“，稍后单击实例名称，在“基本信息“页面，查看磁盘大小，检查扩容是否成功。此过程需要3～5分钟。

    针对MySQL引擎，您可以通过“任务中心“查看详细进度。具体请参见[查看任务](查看任务.md)。


## 只读扩容<a name="section25847103185530"></a>

>![](public_sys-resources/icon-note.gif) **说明：**   
>-   只读实例磁盘扩容与主实例的磁盘扩容互不影响。  
>-   Microsoft SQL Server实例无只读实例。  

1.  登录管理控制台。
2.  单击管理控制台左上角的![](figures/region.png)，选择区域和项目。

    您可选择自己的专属计算集群（Dedicated Computing Cluster，简称DCC）。

3.  选择“数据库  \>  关系型数据库“，进入关系型数据库信息页面。
4.  在“实例管理“页面，选择相应的实例，单击实例名称前的![](figures/next.png)可查看到只读实例，单击“扩容“。您也可以通过单击目标实例名称，进入“基本信息”页面，单击“扩容”，进入“服务选型”页面。
5.  在“服务选型“页面的“磁盘扩容“页签，选择“扩容到”的空间大小，单击“立即申请”。

    用户每次扩容最小容量为10GB，实例所选容量大小必须为10的整数倍，最大磁盘容量跟数据库引擎有关：

    -   对于MySQL/PostgreSQL引擎，最大磁盘容量为6400GB。
    -   对于SQL Server引擎，最大磁盘容量为4000GB。因为window磁盘格式的大小限制，部分SQL Server实例的磁盘容量上限仍为2000GB，具体以页面显示为准。

    当实例处于“磁盘空间满”状态时，需扩容至磁盘空间使用率小于75%才可使实例处于可用状态，即数据库恢复正常的写入操作。

    >![](public_sys-resources/icon-note.gif) **说明：**   
    >1.  具有公测权限的用户才可使用超高性能型实例规格，您可联系华为云客服人员申请。  
    >2.  目前仅MySQL、PostgreSQL引擎支持超高性能型实例规格。  
    >3.  超高性能型实例规格的扩容限制如下：  
    >    -   对于8U64GB规格的实例，用户每次扩容最小容量为800GB，实例所选容量大小必须为10的整数倍，最大磁盘容量为1600GB。  
    >    -   对于16U128GB规格的实例，用户每次扩容最小容量为800GB，实例所选容量大小必须为10的整数倍，最大磁盘容量为3200GB。  
    >    -   对于32U256GB规格的实例，用户每次扩容最小容量为1600GB，实例所选容量大小必须为10的整数倍，最大磁盘容量为6400GB。  
    >    -   对于48U384GB规格的实例，用户每次扩容最小容量为1600GB，实例所选容量大小必须为10的整数倍，最大磁盘容量为9600GB。  
    >    -   对于60U512GB规格的实例，用户每次扩容最小容量为2000GB，实例所选容量大小必须为10的整数倍，最大磁盘容量为11200GB。  

6.  确认订单。
    -   如果需要重新选择，单击“上一步“，回到上个页面，修改新增大小。
    -   如果确认无误，按需实例单击“提交“，包周期实例单击“去支付“，提交扩容。

7.  查看扩容结果。

    在实例管理页面，可看到实例状态为“扩容中“，稍后单击实例名称，在“基本信息“页面，查看磁盘大小，检查扩容是否成功。此过程需要3～5分钟。

    针对MySQL引擎，您可以通过“任务中心“查看详细进度。具体请参见[查看任务](查看任务.md)。


